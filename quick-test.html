<!DOCTYPE html>
<html>
<head>
    <title>Quick Security Test</title>
    <script>
        // Test DOM manipulation security
        function testDOMSecurity() {
            const results = [];
            
            // Test 1: textContent safety
            const testDiv = document.createElement('div');
            testDiv.textContent = '<script>alert("xss")</script>';
            results.push(`DOM textContent: ${testDiv.innerHTML === '&lt;script&gt;alert("xss")&lt;/script&gt;' ? 'SAFE' : 'UNSAFE'}`);
            
            // Test 2: Basic sanitization function exists
            try {
                // Mock the sanitization function pattern from game.js
                function sanitizeTest(input) {
                    return input
                        .replace(/<[^>]*>/g, '')
                        .replace(/[<>&"']/g, '')
                        .replace(/javascript:/gi, '')
                        .replace(/on\w+=/gi, '');
                }
                
                const maliciousInput = '<script>alert("xss")</script><img onerror="alert(1)" src="x">';
                const sanitized = sanitizeTest(maliciousInput);
                results.push(`Sanitization: ${sanitized === 'alert("xss")alert(1)' ? 'WORKING' : 'NEEDS_CHECK'}`);
                
            } catch (e) {
                results.push(`Sanitization: ERROR - ${e.message}`);
            }
            
            // Test 3: CSP header check
            const cspMeta = document.querySelector('meta[http-equiv="Content-Security-Policy"]');
            results.push(`CSP Header: ${cspMeta ? 'PRESENT' : 'MISSING'}`);
            
            return results;
        }
        
        window.onload = function() {
            const results = testDOMSecurity();
            document.body.innerHTML = '<h3>Security Test Results:</h3><ul>' + 
                results.map(r => `<li>${r}</li>`).join('') + '</ul>' +
                '<p><a href="/">‚Üê Back to Game</a></p>';
        };
    </script>
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; img-src 'self' data:;">
</head>
<body>
    <p>Running security tests...</p>
</body>
</html>